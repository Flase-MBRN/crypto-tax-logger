<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#10b981">
    <title>Crypto Tax Logger | MBRN</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Auth Screen (Initial) -->
    <div class="auth-screen" id="authScreen">
        <div class="auth-container">
            <div class="auth-logo">
                <h1>üí∞ Crypto Tax</h1>
                <p>BMF-konforme FIFO-Logs</p>
            </div>
            
            <!-- Login Form -->
            <form class="auth-form" id="loginForm">
                <h2>Anmelden</h2>
                <div class="input-group">
                    <input type="email" id="loginEmail" placeholder="Email" required>
                </div>
                <div class="input-group">
                    <input type="password" id="loginPassword" placeholder="Passwort" required>
                </div>
                <button type="submit" class="btn-primary">Login</button>
                <p class="auth-switch">
                    Noch kein Account? 
                    <a href="#" id="showRegister">Registrieren</a>
                </p>
            </form>

            <!-- Register Form (Hidden) -->
            <form class="auth-form hidden" id="registerForm">
                <h2>Registrieren</h2>
                <div class="input-group">
                    <input type="text" id="regName" placeholder="Name" required>
                </div>
                <div class="input-group">
                    <input type="email" id="regEmail" placeholder="Email" required>
                </div>
                <div class="input-group">
                    <input type="password" id="regPassword" placeholder="Passwort (min. 8 Zeichen)" required>
                </div>
                <div class="plan-selector">
                    <label class="plan-option">
                        <input type="radio" name="plan" value="free" checked>
                        <div class="plan-card">
                            <h4>Free</h4>
                            <p>50 TX/Jahr</p>
                        </div>
                    </label>
                    <label class="plan-option">
                        <input type="radio" name="plan" value="pro">
                        <div class="plan-card pro">
                            <h4>Pro</h4>
                            <p>9‚Ç¨/Monat</p>
                            <span class="badge">Unlimited</span>
                        </div>
                    </label>
                </div>
                <button type="submit" class="btn-primary">Account erstellen</button>
                <p class="auth-switch">
                    Schon registriert? 
                    <a href="#" id="showLogin">Anmelden</a>
                </p>
            </form>
        </div>
    </div>

    <!-- Main App (Hidden until logged in) -->
    <div class="app-wrapper hidden" id="appWrapper">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <button class="menu-btn" id="menuBtn">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <h1 class="logo">üí∞ Crypto Tax</h1>
                <button class="profile-btn" id="profileBtn">
                    <span class="avatar" id="userAvatar">U</span>
                </button>
            </div>
        </header>

        <!-- Sidebar Navigation -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>Men√º</h2>
                <button class="close-btn" id="closeSidebar">&times;</button>
            </div>
            <div class="user-info">
                <div class="user-avatar-large" id="sidebarAvatar">U</div>
                <p class="user-name" id="userName">User Name</p>
                <span class="user-plan" id="userPlan">Free Plan</span>
            </div>
            <ul class="nav-list">
                <li class="nav-item active">
                    <a href="#dashboard" class="nav-link" data-view="dashboard">
                        <span class="icon">üìä</span>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#wallets" class="nav-link" data-view="wallets">
                        <span class="icon">üíº</span>
                        <span>Wallets</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#transactions" class="nav-link" data-view="transactions">
                        <span class="icon">üìù</span>
                        <span>Transaktionen</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#export" class="nav-link" data-view="export">
                        <span class="icon">üì§</span>
                        <span>Export</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#settings" class="nav-link" data-view="settings">
                        <span class="icon">‚öôÔ∏è</span>
                        <span>Einstellungen</span>
                    </a>
                </li>
            </ul>
            <button class="logout-btn" id="logoutBtn">
                <span class="icon">üö™</span>
                Logout
            </button>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard View -->
            <section class="view active" id="dashboardView">
                <!-- Wallet Stats -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon green">üí∞</div>
                        <div class="stat-info">
                            <p class="stat-label">Portfolio Wert</p>
                            <h3 class="stat-value" id="portfolioValue">‚Ç¨0</h3>
                            <span class="stat-change" id="portfolioChange">+0%</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon blue">üìù</div>
                        <div class="stat-info">
                            <p class="stat-label">Transaktionen</p>
                            <h3 class="stat-value" id="txCount">0</h3>
                            <span class="stat-change" id="txLimit">0/50</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon purple">üíº</div>
                        <div class="stat-info">
                            <p class="stat-label">Wallets</p>
                            <h3 class="stat-value" id="walletCount">0</h3>
                            <span class="stat-change neutral">Aktiv</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon orange">üìä</div>
                        <div class="stat-info">
                            <p class="stat-label">Gewinn/Verlust</p>
                            <h3 class="stat-value" id="profitLoss">‚Ç¨0</h3>
                            <span class="stat-change" id="plChange">0%</span>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <section class="quick-actions">
                    <h2>Schnellzugriff</h2>
                    <div class="actions-grid">
                        <button class="action-btn primary" id="addWalletBtn">
                            <span class="action-icon">‚ûï</span>
                            <span>Wallet hinzuf√ºgen</span>
                        </button>
                        <button class="action-btn secondary" id="syncBtn">
                            <span class="action-icon">üîÑ</span>
                            <span>Sync starten</span>
                        </button>
                        <button class="action-btn secondary" id="quickExportBtn">
                            <span class="action-icon">üì§</span>
                            <span>CSV Export</span>
                        </button>
                        <button class="action-btn secondary" id="upgradeBtn">
                            <span class="action-icon">‚≠ê</span>
                            <span>Upgrade Pro</span>
                        </button>
                    </div>
                </section>

                <!-- Recent Transactions -->
                <section class="activity-section">
                    <div class="section-header">
                        <h2>Letzte Transaktionen</h2>
                        <a href="#transactions" class="link-btn">Alle anzeigen ‚Üí</a>
                    </div>
                    <div class="activity-list" id="recentTxList">
                        <div class="empty-state">
                            <p>üîç Noch keine Transaktionen</p>
                            <button class="btn-secondary" id="addFirstWallet">Wallet verbinden</button>
                        </div>
                    </div>
                </section>
            </section>

            <!-- Wallets View -->
            <section class="view hidden" id="walletsView">
                <div class="view-header">
                    <h2>Meine Wallets</h2>
                    <button class="btn-primary" id="addWalletBtn2">+ Wallet</button>
                </div>
                <div class="wallets-grid" id="walletsGrid">
                    <!-- Wallets werden dynamisch geladen -->
                </div>
            </section>

            <!-- Transactions View -->
            <section class="view hidden" id="transactionsView">
                <div class="view-header">
                    <h2>Alle Transaktionen</h2>
                    <div class="filter-controls">
                        <select class="filter-select" id="txFilter">
                            <option value="all">Alle</option>
                            <option value="buy">K√§ufe</option>
                            <option value="sell">Verk√§ufe</option>
                            <option value="transfer">Transfers</option>
                        </select>
                    </div>
                </div>
                <div class="transactions-list" id="transactionsList">
                    <!-- Transaktionen werden dynamisch geladen -->
                </div>
            </section>

            <!-- Export View -->
            <section class="view hidden" id="exportView">
                <div class="export-container">
                    <h2>CSV Export</h2>
                    <div class="export-options">
                        <div class="export-card">
                            <h3>üìä Steuerberater-Export</h3>
                            <p>BMF-konforme FIFO-Berechnung mit allen Pflichtfeldern</p>
                            <button class="btn-primary" id="exportTaxBtn">
                                Export starten
                            </button>
                        </div>
                        <div class="export-card">
                            <h3>üìù Transaktions-Historie</h3>
                            <p>Vollst√§ndige Liste aller Transaktionen</p>
                            <button class="btn-secondary" id="exportAllBtn">
                                Export starten
                            </button>
                        </div>
                    </div>
                    <div class="export-info">
                        <p>‚ÑπÔ∏è <strong>Hinweis:</strong> Dieses Tool ersetzt keine steuerliche Beratung.</p>
                    </div>
                </div>
            </section>

            <!-- Settings View -->
            <section class="view hidden" id="settingsView">
                <h2>Einstellungen</h2>
                <div class="settings-section">
                    <h3>Account</h3>
                    <div class="setting-item">
                        <span>Email</span>
                        <span id="settingsEmail">user@example.com</span>
                    </div>
                    <div class="setting-item">
                        <span>Plan</span>
                        <span id="settingsPlan">Free</span>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Datenschutz</h3>
                    <button class="btn-danger">Account l√∂schen</button>
                </div>
            </section>
        </main>

        <!-- Overlay -->
        <div class="overlay" id="overlay"></div>
    </div>

    <script src="script.js"></script>
</body>
</html>